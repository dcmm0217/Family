# 第2节-java类加载机制

## 1、类加载的过程（生命周期）

==面试题：说说类加载分几步？==

切入点：1、谁需要加载  2、加载的步骤

1. 在Java中数据类型分为基本数据类型和引用数据类型。==基本数据类型由JVM预先定义，引用数据类型则需要进行类的加载==。

从class文件到加载内存中的类，到类卸载出内存为止。它的整个生命周期包括7个阶段

![image-20220308223020159](https://gitee.com/huangwei0123/image/raw/master/img/image-20220308223020159.png)

过程1：类的加载

所谓加载，简而言之就是将Java类的字节码文件加载到机器内存中，并在内存中构建出Java类的原型----类模板对象。

类模板1.8元空间（7永久代）

加载时类加载过程的第一个阶段，在加载阶段，虚拟机需要完成以下三件事情:

- 通过一个类的全名，来获取其定义的二进制字节流。
- 解析类的二进制数据流为方法区内的数据结构（Java类模型）
- 创建java.lang.class类的实例，表示该类型。作为方法区这个类的各种数据的访问入口

二进制流的获取方式：

- 虚拟机通过本地文件系统读入一个class后缀的文件（**常用**）
- 读入jar、zip等数据包，提取class文件
- 网络下载.class文件

class实例的位置在哪？

类将.class文件加载至元空间后，会在==堆==中创建一个Java.lang.class对象，用来封装类位于方法区内的数据结构，该class类对象是在加载类的过程中创建的，每个类都对应有一个class类型的对象。

![image-20220308224447405](https://gitee.com/huangwei0123/image/raw/master/img/image-20220308224447405.png)

## 2、类的加载器

