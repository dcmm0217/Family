# MySQL事务日志

## 1、redo日志

事务有4种特性：原子性、一致性、隔离性和持久性。那么事务的四种特性到底是基于什么机制实现呢？

- 事务的**隔离性**由`锁机制`实现
- 而**事务的原子性、一致性和持久性**由事务的**redo日志**和**undo日志**来保证
  - redo log 称为 `重做日志`，提供再写入操作，恢复提交事务修改的页操作，用来保证事务的持久性。
  - undo log 称为 `回滚日志`，回滚行记录到某个特定版本，用来保证事务的原子性、一致性。

有的DBA或许会认为undo是redo的逆过程，其实不然。redo和undo都可以视为是一种`恢复操作`，但是：

- redo log ：是存储引擎层（innodb）生成的日志，记录的是`物理级别`上的页修改操作，比如页号xxx，偏移量yyy，写了zzz数据，主要为了保证数据的可靠性。
- undo log：是存储引擎（innodb）生成的日志，记录的是`逻辑操作`的日志。比如对某一行数据进行了insert语句操作，那么undo log就记录一条与之相反的delete操作。主要用于`事务的回滚`（undo log 记录的是每个修改操作的**逆日志**）和**一致性非锁定读**（==undo log回滚行记录到某种特定版本--MVCC==，即多版本并发控制）

